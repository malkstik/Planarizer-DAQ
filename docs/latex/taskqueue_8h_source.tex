\hypertarget{taskqueue_8h_source}{}\doxysection{taskqueue.\+h}
\label{taskqueue_8h_source}\index{src/taskqueue.h@{src/taskqueue.h}}
\mbox{\hyperlink{taskqueue_8h}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{1 }
\DoxyCodeLine{19 \textcolor{comment}{/*    THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "{}AS}}
\DoxyCodeLine{20 \textcolor{comment}{ *    IS"{} AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,}}
\DoxyCodeLine{21 \textcolor{comment}{ *    THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR }}
\DoxyCodeLine{22 \textcolor{comment}{ *    PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIB-\/}}
\DoxyCodeLine{23 \textcolor{comment}{ *    UTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY,}}
\DoxyCodeLine{24 \textcolor{comment}{ *    OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF }}
\DoxyCodeLine{25 \textcolor{comment}{ *    SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS}}
\DoxyCodeLine{26 \textcolor{comment}{ *    INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN }}
\DoxyCodeLine{27 \textcolor{comment}{ *    CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) }}
\DoxyCodeLine{28 \textcolor{comment}{ *    ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF}}
\DoxyCodeLine{29 \textcolor{comment}{ *    THE POSSIBILITY OF SUCH DAMAGE. */}}
\DoxyCodeLine{30 }
\DoxyCodeLine{31 \textcolor{comment}{// This define prevents this .h file from being included more than once}}
\DoxyCodeLine{32 \textcolor{preprocessor}{\#ifndef \_TASKQUEUE\_H\_}}
\DoxyCodeLine{33 \textcolor{preprocessor}{\#define \_TASKQUEUE\_H\_}}
\DoxyCodeLine{34 }
\DoxyCodeLine{35 \textcolor{preprocessor}{\#include <Arduino.h>}}
\DoxyCodeLine{36 \textcolor{preprocessor}{\#include "{}FreeRTOS.h"{}}                       \textcolor{comment}{// Main header for FreeRTOS}}
\DoxyCodeLine{37 \textcolor{preprocessor}{\#include "{}\mbox{\hyperlink{baseshare_8h}{baseshare.h}}"{}}}
\DoxyCodeLine{38 }
\DoxyCodeLine{39 }
\DoxyCodeLine{128 \textcolor{keyword}{template} <\textcolor{keyword}{class} dataType> \textcolor{keyword}{class }\mbox{\hyperlink{class_queue}{Queue}} : \textcolor{keyword}{public} \mbox{\hyperlink{class_base_share}{BaseShare}}}
\DoxyCodeLine{129 \{}
\DoxyCodeLine{130 \textcolor{comment}{// This protected data can only be accessed from this class or its }}
\DoxyCodeLine{131 \textcolor{comment}{// descendents}}
\DoxyCodeLine{132 \textcolor{keyword}{protected}:}
\DoxyCodeLine{133     QueueHandle\_t \mbox{\hyperlink{class_queue_a69b90b10718e9469499375c61cc9c236}{handle}};             }
\DoxyCodeLine{134     TickType\_t \mbox{\hyperlink{class_queue_ac7869eacf6bc024b4d8ce25496fdaaed}{ticks\_to\_wait}};         }
\DoxyCodeLine{135     uint16\_t \mbox{\hyperlink{class_queue_a2ede016bcaf8f330cd87f56a600218b1}{buf\_size}};                }
\DoxyCodeLine{136     uint16\_t \mbox{\hyperlink{class_queue_acd5a036b50ef0fc8f1e587bb7307cee4}{max\_full}};                }
\DoxyCodeLine{137 }
\DoxyCodeLine{138 \textcolor{comment}{// Public methods can be called from anywhere in the program where there is}}
\DoxyCodeLine{139 \textcolor{comment}{// a pointer or reference to an object of this class}}
\DoxyCodeLine{140 \textcolor{keyword}{public}:}
\DoxyCodeLine{141     \textcolor{comment}{// The constructor creates a FreeRTOS queue}}
\DoxyCodeLine{142     \mbox{\hyperlink{class_queue_ae4a3fd660457ea5f5a4f3605322db150}{Queue}} (BaseType\_t queue\_size, \textcolor{keyword}{const} \textcolor{keywordtype}{char}* p\_name = NULL, }
\DoxyCodeLine{143             TickType\_t = portMAX\_DELAY);}
\DoxyCodeLine{144 }
\DoxyCodeLine{145     \textcolor{comment}{// Put an item into the queue behind other items.}}
\DoxyCodeLine{146     \textcolor{keywordtype}{bool} \mbox{\hyperlink{class_queue_ae7859c00b2e2818183bfd54979091e60}{put}} (\textcolor{keyword}{const} dataType item);}
\DoxyCodeLine{147 }
\DoxyCodeLine{148     \textcolor{comment}{// This method puts an item of data into the back of the queue from }}
\DoxyCodeLine{149     \textcolor{comment}{// within an interrupt service routine. It must not be used within }}
\DoxyCodeLine{150     \textcolor{comment}{// non-\/ISR code. }}
\DoxyCodeLine{151     \textcolor{keywordtype}{bool} \mbox{\hyperlink{class_queue_a331cd54d6b3052b4d72ad24310be5e90}{ISR\_put}} (\textcolor{keyword}{const} dataType item);}
\DoxyCodeLine{152 }
\DoxyCodeLine{167     \textcolor{keywordtype}{bool} \mbox{\hyperlink{class_queue_ad3c592b245b39ce229b157935f5a65fa}{butt\_in}} (\textcolor{keyword}{const} dataType item)}
\DoxyCodeLine{168     \{}
\DoxyCodeLine{169         \textcolor{keywordflow}{return} ((\textcolor{keywordtype}{bool})(xQueueSendToFront (\mbox{\hyperlink{class_queue_a69b90b10718e9469499375c61cc9c236}{handle}}, \&item, \mbox{\hyperlink{class_queue_ac7869eacf6bc024b4d8ce25496fdaaed}{ticks\_to\_wait}})));}
\DoxyCodeLine{170     \}}
\DoxyCodeLine{171 }
\DoxyCodeLine{172     \textcolor{comment}{// This method puts an item into the front of the queue from within }}
\DoxyCodeLine{173     \textcolor{comment}{// an ISR. It must not be used within normal, non-\/ISR code. }}
\DoxyCodeLine{174     \textcolor{keywordtype}{bool} \mbox{\hyperlink{class_queue_aca6ce3a61ea4bcdd4699fd639e2a6137}{ISR\_butt\_in}} (\textcolor{keyword}{const} dataType item);}
\DoxyCodeLine{175 }
\DoxyCodeLine{182     \textcolor{keywordtype}{bool} \mbox{\hyperlink{class_queue_a7b240bc3f080ea3656d0847b5d291095}{is\_empty}} (\textcolor{keywordtype}{void})}
\DoxyCodeLine{183     \{}
\DoxyCodeLine{184         \textcolor{keywordflow}{return} (uxQueueMessagesWaiting (\mbox{\hyperlink{class_queue_a69b90b10718e9469499375c61cc9c236}{handle}}) == 0);}
\DoxyCodeLine{185     \}}
\DoxyCodeLine{186 }
\DoxyCodeLine{193     \textcolor{keywordtype}{bool} \mbox{\hyperlink{class_queue_ac0d4a3d7feae804dea7f3cc72f21c624}{ISR\_is\_empty}} (\textcolor{keywordtype}{void})}
\DoxyCodeLine{194     \{}
\DoxyCodeLine{195         \textcolor{keywordflow}{return} (uxQueueMessagesWaitingFromISR (\mbox{\hyperlink{class_queue_a69b90b10718e9469499375c61cc9c236}{handle}}) == 0);}
\DoxyCodeLine{196     \}}
\DoxyCodeLine{197 }
\DoxyCodeLine{208     \textcolor{keywordtype}{void} \mbox{\hyperlink{class_queue_a14df528749e226183df3fa5472368e82}{get}} (dataType\& recv\_item)}
\DoxyCodeLine{209     \{}
\DoxyCodeLine{210         \textcolor{comment}{// If xQueueReceive doesn't return pdTrue, nothing was found in the}}
\DoxyCodeLine{211         \textcolor{comment}{// queue, so no changes are made to the item}}
\DoxyCodeLine{212         xQueueReceive (\mbox{\hyperlink{class_queue_a69b90b10718e9469499375c61cc9c236}{handle}}, \&recv\_item, \mbox{\hyperlink{class_queue_ac7869eacf6bc024b4d8ce25496fdaaed}{ticks\_to\_wait}});}
\DoxyCodeLine{213     \}}
\DoxyCodeLine{214 }
\DoxyCodeLine{224     dataType \mbox{\hyperlink{class_queue_ae24699e7027efd7da838f9a1037e29b5}{get}} (\textcolor{keywordtype}{void})}
\DoxyCodeLine{225     \{}
\DoxyCodeLine{226         dataType return\_this;}
\DoxyCodeLine{227         xQueueReceive (\mbox{\hyperlink{class_queue_a69b90b10718e9469499375c61cc9c236}{handle}}, \&return\_this, \mbox{\hyperlink{class_queue_ac7869eacf6bc024b4d8ce25496fdaaed}{ticks\_to\_wait}});}
\DoxyCodeLine{228         \textcolor{keywordflow}{return} return\_this;}
\DoxyCodeLine{229     \}}
\DoxyCodeLine{230 }
\DoxyCodeLine{238     \textcolor{keywordtype}{void} \mbox{\hyperlink{class_queue_afd37b4f184be25ecebf7957900321bbf}{ISR\_get}} (dataType\& recv\_item)}
\DoxyCodeLine{239     \{}
\DoxyCodeLine{240         portBASE\_TYPE task\_awakened;         \textcolor{comment}{// Checks if context switch needed}}
\DoxyCodeLine{241 }
\DoxyCodeLine{242         \textcolor{comment}{// If xQueueReceive doesn't return pdTrue, nothing was found in the}}
\DoxyCodeLine{243         \textcolor{comment}{// queue, so we won't change the data referenced in the parameter}}
\DoxyCodeLine{244         xQueueReceiveFromISR (\mbox{\hyperlink{class_queue_a69b90b10718e9469499375c61cc9c236}{handle}}, \&recv\_item, \&task\_awakened);}
\DoxyCodeLine{245     \}}
\DoxyCodeLine{246 }
\DoxyCodeLine{255     dataType \mbox{\hyperlink{class_queue_acf984762445f0361ff8aed3a33d78409}{ISR\_get}} (\textcolor{keywordtype}{void})}
\DoxyCodeLine{256     \{}
\DoxyCodeLine{257         portBASE\_TYPE task\_awakened;         \textcolor{comment}{// Checks if context switch needed}}
\DoxyCodeLine{258 }
\DoxyCodeLine{259         dataType return\_this;}
\DoxyCodeLine{260         xQueueReceiveFromISR (\mbox{\hyperlink{class_queue_a69b90b10718e9469499375c61cc9c236}{handle}}, \&return\_this, \&task\_awakened);}
\DoxyCodeLine{261         \textcolor{keywordflow}{return} return\_this;}
\DoxyCodeLine{262     \}}
\DoxyCodeLine{263 }
\DoxyCodeLine{275     \textcolor{keywordtype}{void} \mbox{\hyperlink{class_queue_a44557ed37c98580b87d0196908330bcc}{peek}} (dataType\& recv\_item)}
\DoxyCodeLine{276     \{}
\DoxyCodeLine{277         \textcolor{comment}{// If xQueueReceive doesn't return pdTrue, nothing was found in the}}
\DoxyCodeLine{278         \textcolor{comment}{// queue, so don't change the item}}
\DoxyCodeLine{279         xQueuePeek (\mbox{\hyperlink{class_queue_a69b90b10718e9469499375c61cc9c236}{handle}}, \&recv\_item, \mbox{\hyperlink{class_queue_ac7869eacf6bc024b4d8ce25496fdaaed}{ticks\_to\_wait}});}
\DoxyCodeLine{280     \}}
\DoxyCodeLine{281 }
\DoxyCodeLine{293     dataType \mbox{\hyperlink{class_queue_a98b721db58328663cc8d5466d757fa51}{peek}} (\textcolor{keywordtype}{void})}
\DoxyCodeLine{294     \{}
\DoxyCodeLine{295         dataType recv\_item;}
\DoxyCodeLine{296         xQueuePeek (\mbox{\hyperlink{class_queue_a69b90b10718e9469499375c61cc9c236}{handle}}, \&recv\_item, \mbox{\hyperlink{class_queue_ac7869eacf6bc024b4d8ce25496fdaaed}{ticks\_to\_wait}});}
\DoxyCodeLine{297         \textcolor{keywordflow}{return} recv\_item;}
\DoxyCodeLine{298     \}}
\DoxyCodeLine{299 }
\DoxyCodeLine{310     \textcolor{keywordtype}{void} \mbox{\hyperlink{class_queue_a087ad13824fab4dfa026ef5cf138ca05}{ISR\_peek}} (dataType\& recv\_item)}
\DoxyCodeLine{311     \{}
\DoxyCodeLine{312         portBASE\_TYPE task\_awakened;           \textcolor{comment}{// Checks if a task will wake up}}
\DoxyCodeLine{313 }
\DoxyCodeLine{314         \textcolor{comment}{// If xQueueReceive doesn't return pdTrue, nothing was found in the }}
\DoxyCodeLine{315         \textcolor{comment}{// queue, so the value of recv\_item is not changed}}
\DoxyCodeLine{316         xQueuePeekFromISR (\mbox{\hyperlink{class_queue_a69b90b10718e9469499375c61cc9c236}{handle}}, \&recv\_item, \&task\_awakened);}
\DoxyCodeLine{317     \}}
\DoxyCodeLine{318 }
\DoxyCodeLine{328     dataType \mbox{\hyperlink{class_queue_a2e7e84117611c6074e37a339e9b5b901}{ISR\_peek}} (\textcolor{keywordtype}{void})}
\DoxyCodeLine{329     \{}
\DoxyCodeLine{330         portBASE\_TYPE task\_awakened;           \textcolor{comment}{// Checks if a task will wake up}}
\DoxyCodeLine{331         dataType recv\_item;}
\DoxyCodeLine{332         xQueuePeekFromISR (\mbox{\hyperlink{class_queue_a69b90b10718e9469499375c61cc9c236}{handle}}, \&recv\_item, \&task\_awakened);}
\DoxyCodeLine{333         \textcolor{keywordflow}{return} recv\_item;}
\DoxyCodeLine{334     \}}
\DoxyCodeLine{335 }
\DoxyCodeLine{342     \textcolor{keywordtype}{bool} \mbox{\hyperlink{class_queue_a7eb3e7ac6e9a1ec956a11cbdc7c5a44d}{any}} (\textcolor{keywordtype}{void})}
\DoxyCodeLine{343     \{}
\DoxyCodeLine{344         \textcolor{keywordflow}{return} (uxQueueMessagesWaiting (\mbox{\hyperlink{class_queue_a69b90b10718e9469499375c61cc9c236}{handle}}) != 0);}
\DoxyCodeLine{345     \}}
\DoxyCodeLine{346 }
\DoxyCodeLine{356     \textcolor{keywordtype}{void} \mbox{\hyperlink{class_queue_a61f764fa35a4880b277a2b6d23651f45}{operator << }}(dataType new\_data)}
\DoxyCodeLine{357     \{}
\DoxyCodeLine{358         \textcolor{keywordflow}{if} (CHECK\_IF\_IN\_ISR ())}
\DoxyCodeLine{359         \{}
\DoxyCodeLine{360             \mbox{\hyperlink{class_queue_a331cd54d6b3052b4d72ad24310be5e90}{ISR\_put}} (new\_data);}
\DoxyCodeLine{361         \}}
\DoxyCodeLine{362         \textcolor{keywordflow}{else}}
\DoxyCodeLine{363         \{}
\DoxyCodeLine{364             \mbox{\hyperlink{class_queue_ae7859c00b2e2818183bfd54979091e60}{put}} (new\_data);}
\DoxyCodeLine{365         \}}
\DoxyCodeLine{366     \}}
\DoxyCodeLine{367 }
\DoxyCodeLine{380     \textcolor{keywordtype}{void} \mbox{\hyperlink{class_queue_adc6d1c4c6d4c3e397aa4f194f4ad2ffb}{operator >> }}(dataType\& put\_here)}
\DoxyCodeLine{381     \{}
\DoxyCodeLine{382         \textcolor{keywordflow}{if} (CHECK\_IF\_IN\_ISR ())}
\DoxyCodeLine{383         \{}
\DoxyCodeLine{384             portBASE\_TYPE task\_awakened;     \textcolor{comment}{// Checks if context switch needed}}
\DoxyCodeLine{385 }
\DoxyCodeLine{386              \textcolor{comment}{// Copy the data from the queue into the receiving variable}}
\DoxyCodeLine{387             xQueueReceiveFromISR (\mbox{\hyperlink{class_queue_a69b90b10718e9469499375c61cc9c236}{handle}}, \&put\_here, \&task\_awakened);}
\DoxyCodeLine{388         \}}
\DoxyCodeLine{389         \textcolor{keywordflow}{else}}
\DoxyCodeLine{390         \{}
\DoxyCodeLine{391             xQueueReceive (\mbox{\hyperlink{class_queue_a69b90b10718e9469499375c61cc9c236}{handle}}, \&put\_here, \mbox{\hyperlink{class_queue_ac7869eacf6bc024b4d8ce25496fdaaed}{ticks\_to\_wait}});}
\DoxyCodeLine{392         \}}
\DoxyCodeLine{393     \}}
\DoxyCodeLine{394 }
\DoxyCodeLine{402     \textcolor{keywordtype}{bool} \mbox{\hyperlink{class_queue_a80711abebd086d5617e5c88dbd87b77a}{ISR\_any}} (\textcolor{keywordtype}{void})}
\DoxyCodeLine{403     \{}
\DoxyCodeLine{404         \textcolor{keywordflow}{return} (uxQueueMessagesWaitingFromISR (\mbox{\hyperlink{class_queue_a69b90b10718e9469499375c61cc9c236}{handle}}) != 0);}
\DoxyCodeLine{405     \}}
\DoxyCodeLine{406 }
\DoxyCodeLine{414     \textcolor{keywordtype}{unsigned} portBASE\_TYPE \mbox{\hyperlink{class_queue_a6bef71a925790602cef9eb6274ae61e3}{available}} (\textcolor{keywordtype}{void})}
\DoxyCodeLine{415     \{}
\DoxyCodeLine{416         \textcolor{keywordflow}{return} (uxQueueMessagesWaiting (\mbox{\hyperlink{class_queue_a69b90b10718e9469499375c61cc9c236}{handle}}));}
\DoxyCodeLine{417     \}}
\DoxyCodeLine{418 }
\DoxyCodeLine{425     \textcolor{keywordtype}{unsigned} portBASE\_TYPE \mbox{\hyperlink{class_queue_a1acce9f67b2549a17a8419536aac396b}{ISR\_available}} (\textcolor{keywordtype}{void})}
\DoxyCodeLine{426     \{}
\DoxyCodeLine{427         \textcolor{keywordflow}{return} (uxQueueMessagesWaitingFromISR (\mbox{\hyperlink{class_queue_a69b90b10718e9469499375c61cc9c236}{handle}}));}
\DoxyCodeLine{428     \}}
\DoxyCodeLine{429 }
\DoxyCodeLine{437     \textcolor{keywordtype}{void} \mbox{\hyperlink{class_queue_ace8d2d512e49f018c5e2df4b5a2bf810}{print\_in\_list}} (Print\& print\_dev);}
\DoxyCodeLine{438 }
\DoxyCodeLine{444     \textcolor{keywordtype}{bool} \mbox{\hyperlink{class_queue_a2f5a7d38f857999a1c4cebe31089b0f7}{usable}} (\textcolor{keywordtype}{void})}
\DoxyCodeLine{445     \{}
\DoxyCodeLine{446         \textcolor{keywordflow}{return} (\textcolor{keywordtype}{bool})\mbox{\hyperlink{class_queue_a69b90b10718e9469499375c61cc9c236}{handle}};}
\DoxyCodeLine{447     \}}
\DoxyCodeLine{448 }
\DoxyCodeLine{458     QueueHandle\_t \mbox{\hyperlink{class_queue_ab009e50722f689c48d146125f6d50519}{get\_handle}} (\textcolor{keywordtype}{void})}
\DoxyCodeLine{459     \{}
\DoxyCodeLine{460         \textcolor{keywordflow}{return} \mbox{\hyperlink{class_queue_a69b90b10718e9469499375c61cc9c236}{handle}};}
\DoxyCodeLine{461     \}}
\DoxyCodeLine{462 \}; \textcolor{comment}{// class Queue }}
\DoxyCodeLine{463 }
\DoxyCodeLine{464 }
\DoxyCodeLine{475 \textcolor{keyword}{template} <\textcolor{keyword}{class} dataType>}
\DoxyCodeLine{476 \mbox{\hyperlink{class_queue_ae4a3fd660457ea5f5a4f3605322db150}{Queue<dataType>::Queue}} (BaseType\_t queue\_size, \textcolor{keyword}{const} \textcolor{keywordtype}{char}* p\_name, }
\DoxyCodeLine{477                         TickType\_t wait\_time)}
\DoxyCodeLine{478     : \mbox{\hyperlink{class_base_share}{BaseShare}} (p\_name)}
\DoxyCodeLine{479 \{}
\DoxyCodeLine{480     \textcolor{comment}{// Create a FreeRTOS queue object with space for the data items}}
\DoxyCodeLine{481     \mbox{\hyperlink{class_queue_a69b90b10718e9469499375c61cc9c236}{handle}} = xQueueCreate (queue\_size, \textcolor{keyword}{sizeof} (dataType));}
\DoxyCodeLine{482 }
\DoxyCodeLine{483     \textcolor{comment}{// Store the wait time; it will be used when writing to the queue}}
\DoxyCodeLine{484     \mbox{\hyperlink{class_queue_ac7869eacf6bc024b4d8ce25496fdaaed}{ticks\_to\_wait}} = wait\_time;}
\DoxyCodeLine{485 }
\DoxyCodeLine{486     \textcolor{comment}{// Save the buffer size}}
\DoxyCodeLine{487     \mbox{\hyperlink{class_queue_a2ede016bcaf8f330cd87f56a600218b1}{buf\_size}} = queue\_size;}
\DoxyCodeLine{488 }
\DoxyCodeLine{489     \textcolor{comment}{// We haven't stored any items in the queue yet}}
\DoxyCodeLine{490     \mbox{\hyperlink{class_queue_acd5a036b50ef0fc8f1e587bb7307cee4}{max\_full}} = 0;}
\DoxyCodeLine{491 \}}
\DoxyCodeLine{492 }
\DoxyCodeLine{493 }
\DoxyCodeLine{503 \textcolor{keyword}{template} <\textcolor{keyword}{class} dataType>}
\DoxyCodeLine{504 \textcolor{keyword}{inline} \textcolor{keywordtype}{bool} \mbox{\hyperlink{class_queue_ae7859c00b2e2818183bfd54979091e60}{Queue<dataType>::put}} (\textcolor{keyword}{const} dataType item)}
\DoxyCodeLine{505 \{}
\DoxyCodeLine{506     \textcolor{keywordtype}{bool} return\_value = (bool)(xQueueSendToBack (handle, \&item, }
\DoxyCodeLine{507                                                  ticks\_to\_wait));}
\DoxyCodeLine{508 }
\DoxyCodeLine{509     \textcolor{comment}{// Keep track of the maximum fillage of the queue}}
\DoxyCodeLine{510     uint16\_t fillage = uxQueueMessagesWaiting (handle);}
\DoxyCodeLine{511     \textcolor{keywordflow}{if} (fillage > max\_full)}
\DoxyCodeLine{512     \{}
\DoxyCodeLine{513         max\_full = fillage;}
\DoxyCodeLine{514     \}}
\DoxyCodeLine{515 }
\DoxyCodeLine{516     \textcolor{keywordflow}{return} (return\_value);}
\DoxyCodeLine{517 \}}
\DoxyCodeLine{518 }
\DoxyCodeLine{519 }
\DoxyCodeLine{527 \textcolor{keyword}{template} <\textcolor{keyword}{class} dataType>}
\DoxyCodeLine{528 \textcolor{keyword}{inline} \textcolor{keywordtype}{bool} \mbox{\hyperlink{class_queue_a331cd54d6b3052b4d72ad24310be5e90}{Queue<dataType>::ISR\_put}} (\textcolor{keyword}{const} dataType item)}
\DoxyCodeLine{529 \{}
\DoxyCodeLine{530     \textcolor{comment}{// This value is set true if a context switch should occur due to this data}}
\DoxyCodeLine{531     \textcolor{keywordtype}{signed} portBASE\_TYPE shouldSwitch = pdFALSE;}
\DoxyCodeLine{532 }
\DoxyCodeLine{533     \textcolor{keywordtype}{bool} return\_value;                      \textcolor{comment}{// Value returned from this method}}
\DoxyCodeLine{534 }
\DoxyCodeLine{535     \textcolor{comment}{// Call the FreeRTOS function and save its return value}}
\DoxyCodeLine{536     return\_value = (bool)(xQueueSendToBackFromISR (handle, \&item, }
\DoxyCodeLine{537                                                    \&shouldSwitch));}
\DoxyCodeLine{538 }
\DoxyCodeLine{539     \textcolor{comment}{// Keep track of the maximum fillage of the queue. BUG: max\_full isn't}}
\DoxyCodeLine{540     \textcolor{comment}{// thread safe (but getting max\_full corrupted shouldn't cause a calamity)}}
\DoxyCodeLine{541     uint16\_t fillage = uxQueueMessagesWaitingFromISR (handle);}
\DoxyCodeLine{542     \textcolor{keywordflow}{if} (fillage > max\_full)}
\DoxyCodeLine{543     \{}
\DoxyCodeLine{544         max\_full = fillage;}
\DoxyCodeLine{545     \}}
\DoxyCodeLine{546 }
\DoxyCodeLine{547     \textcolor{comment}{// Return the return value saved from the call to xQueueSendToBackFromISR()}}
\DoxyCodeLine{548     \textcolor{keywordflow}{return} (return\_value);}
\DoxyCodeLine{549 \}}
\DoxyCodeLine{550 }
\DoxyCodeLine{551 }
\DoxyCodeLine{559 \textcolor{keyword}{template} <\textcolor{keyword}{class} dataType>}
\DoxyCodeLine{560 \textcolor{keyword}{inline} \textcolor{keywordtype}{bool} \mbox{\hyperlink{class_queue_aca6ce3a61ea4bcdd4699fd639e2a6137}{Queue<dataType>::ISR\_butt\_in}} (\textcolor{keyword}{const} dataType item)}
\DoxyCodeLine{561 \{}
\DoxyCodeLine{562     \textcolor{comment}{// This value is set true if a context switch should occur due to this data}}
\DoxyCodeLine{563     \textcolor{keywordtype}{signed} portBASE\_TYPE shouldSwitch = pdFALSE;}
\DoxyCodeLine{564 }
\DoxyCodeLine{565     \textcolor{keywordtype}{bool} return\_value;                        \textcolor{comment}{// Value returned from this method}}
\DoxyCodeLine{566 }
\DoxyCodeLine{567     \textcolor{comment}{// Call the FreeRTOS function and save its return value}}
\DoxyCodeLine{568     return\_value = (bool)(xQueueSendToFrontFromISR (handle, \&item, }
\DoxyCodeLine{569                                                     \&shouldSwitch));}
\DoxyCodeLine{570 }
\DoxyCodeLine{571     \textcolor{comment}{// Return the return value saved from the call to xQueueSendToBackFromISR()}}
\DoxyCodeLine{572     \textcolor{keywordflow}{return} (return\_value);}
\DoxyCodeLine{573 \}}
\DoxyCodeLine{574 }
\DoxyCodeLine{575 }
\DoxyCodeLine{582 \textcolor{keyword}{template} <\textcolor{keyword}{class} dataType>}
\DoxyCodeLine{583 \textcolor{keywordtype}{void} \mbox{\hyperlink{class_queue_ace8d2d512e49f018c5e2df4b5a2bf810}{Queue<dataType>::print\_in\_list}} (Print\& print\_dev)}
\DoxyCodeLine{584 \{}
\DoxyCodeLine{585     \textcolor{comment}{// Print this task's name and pad it to 16 characters}}
\DoxyCodeLine{586     print\_dev.printf (\textcolor{stringliteral}{"{}\%-\/16squeue\(\backslash\)t"{}}, name);}
\DoxyCodeLine{587 }
\DoxyCodeLine{588     \textcolor{comment}{// Print the free and total number of spaces in the queue or an error}}
\DoxyCodeLine{589     \textcolor{comment}{// message if this queue can't be used (probably due to a memory error)}}
\DoxyCodeLine{590     \textcolor{keywordflow}{if} (usable ())}
\DoxyCodeLine{591     \{}
\DoxyCodeLine{592         print\_dev << max\_full << \textcolor{charliteral}{'/'} << buf\_size << endl;}
\DoxyCodeLine{593     \}}
\DoxyCodeLine{594     \textcolor{keywordflow}{else}}
\DoxyCodeLine{595     \{}
\DoxyCodeLine{596         print\_dev << \textcolor{stringliteral}{"{}UNUSABLE"{}} << endl;}
\DoxyCodeLine{597     \}}
\DoxyCodeLine{598 }
\DoxyCodeLine{599     \textcolor{comment}{// Call the next item}}
\DoxyCodeLine{600     \textcolor{keywordflow}{if} (p\_next != NULL)}
\DoxyCodeLine{601     \{}
\DoxyCodeLine{602         p\_next-\/>print\_in\_list (print\_dev);}
\DoxyCodeLine{603     \}}
\DoxyCodeLine{604 \}}
\DoxyCodeLine{605 }
\DoxyCodeLine{606 \textcolor{preprocessor}{\#endif  }\textcolor{comment}{// \_TASKQUEUE\_H\_}}

\end{DoxyCode}
