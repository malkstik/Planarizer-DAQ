\hypertarget{taskshare_8h_source}{}\doxysection{taskshare.\+h}
\label{taskshare_8h_source}\index{src/taskshare.h@{src/taskshare.h}}
\mbox{\hyperlink{taskshare_8h}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{1 }
\DoxyCodeLine{28 \textcolor{comment}{/*    THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "{}AS}}
\DoxyCodeLine{29 \textcolor{comment}{ *    IS"{} AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,}}
\DoxyCodeLine{30 \textcolor{comment}{ *    THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR }}
\DoxyCodeLine{31 \textcolor{comment}{ *    PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIB-\/}}
\DoxyCodeLine{32 \textcolor{comment}{ *    UTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY,}}
\DoxyCodeLine{33 \textcolor{comment}{ *    OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF }}
\DoxyCodeLine{34 \textcolor{comment}{ *    SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS}}
\DoxyCodeLine{35 \textcolor{comment}{ *    INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN }}
\DoxyCodeLine{36 \textcolor{comment}{ *    CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) }}
\DoxyCodeLine{37 \textcolor{comment}{ *    ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF}}
\DoxyCodeLine{38 \textcolor{comment}{ *    THE POSSIBILITY OF SUCH DAMAGE. */}}
\DoxyCodeLine{39 }
\DoxyCodeLine{40 \textcolor{comment}{// This define prevents this .h file from being included more than once}}
\DoxyCodeLine{41 \textcolor{preprocessor}{\#ifndef \_TASKSHARE\_H\_}}
\DoxyCodeLine{42 \textcolor{preprocessor}{\#define \_TASKSHARE\_H\_}}
\DoxyCodeLine{43 }
\DoxyCodeLine{44 \textcolor{preprocessor}{\#include "{}\mbox{\hyperlink{baseshare_8h}{baseshare.h}}"{}}                      \textcolor{comment}{// Base class for shared data items}}
\DoxyCodeLine{45 \textcolor{preprocessor}{\#include "{}FreeRTOS.h"{}}                       \textcolor{comment}{// Main header for FreeRTOS}}
\DoxyCodeLine{46 }
\DoxyCodeLine{119 \textcolor{keyword}{template} <\textcolor{keyword}{class} DataType> \textcolor{keyword}{class }\mbox{\hyperlink{class_share}{Share}} : \textcolor{keyword}{public} \mbox{\hyperlink{class_base_share}{BaseShare}}}
\DoxyCodeLine{120 \{}
\DoxyCodeLine{121 \textcolor{keyword}{protected}:}
\DoxyCodeLine{123     QueueHandle\_t \mbox{\hyperlink{class_share_a1b82b2d5fa5e69b0445fb5a718a9575a}{queue}};}
\DoxyCodeLine{124 }
\DoxyCodeLine{125 \textcolor{keyword}{public}:}
\DoxyCodeLine{133     \mbox{\hyperlink{class_share}{Share<DataType>}} (\textcolor{keyword}{const} \textcolor{keywordtype}{char}* p\_name = NULL) : \mbox{\hyperlink{class_base_share}{BaseShare}} (p\_name)}
\DoxyCodeLine{134     \{}
\DoxyCodeLine{135         \mbox{\hyperlink{class_share_a1b82b2d5fa5e69b0445fb5a718a9575a}{queue}} = xQueueCreate (1, \textcolor{keyword}{sizeof} (DataType));}
\DoxyCodeLine{136     \}}
\DoxyCodeLine{137 }
\DoxyCodeLine{142     \textcolor{keywordtype}{void} \mbox{\hyperlink{class_share_aef08e3bc0686d8032f40613be8c13df4}{put}} (DataType new\_data)}
\DoxyCodeLine{143     \{}
\DoxyCodeLine{144         xQueueOverwrite (\mbox{\hyperlink{class_share_a1b82b2d5fa5e69b0445fb5a718a9575a}{queue}}, \&new\_data);}
\DoxyCodeLine{145     \}}
\DoxyCodeLine{146 }
\DoxyCodeLine{153     \textcolor{keywordtype}{void} \mbox{\hyperlink{class_share_a2f14732a5337d8d54e36de7c8bfc6459}{ISR\_put}} (DataType new\_data)}
\DoxyCodeLine{154     \{}
\DoxyCodeLine{155         BaseType\_t wake\_up;}
\DoxyCodeLine{156         xQueueOverwriteFromISR (\mbox{\hyperlink{class_share_a1b82b2d5fa5e69b0445fb5a718a9575a}{queue}}, \&new\_data, \&wake\_up);}
\DoxyCodeLine{157     \}}
\DoxyCodeLine{158 }
\DoxyCodeLine{168     \textcolor{keywordtype}{void} \mbox{\hyperlink{class_share_ab4990baa4c1ea5572618520c5a3b39e7}{operator << }}(DataType new\_data)}
\DoxyCodeLine{169     \{}
\DoxyCodeLine{170         \textcolor{keywordflow}{if} (CHECK\_IF\_IN\_ISR ())}
\DoxyCodeLine{171         \{}
\DoxyCodeLine{172             BaseType\_t wake\_up;}
\DoxyCodeLine{173             xQueueOverwriteFromISR (\mbox{\hyperlink{class_share_a1b82b2d5fa5e69b0445fb5a718a9575a}{queue}}, \&new\_data, \&wake\_up);}
\DoxyCodeLine{174         \}}
\DoxyCodeLine{175         \textcolor{keywordflow}{else}}
\DoxyCodeLine{176         \{}
\DoxyCodeLine{177             xQueueOverwrite (\mbox{\hyperlink{class_share_a1b82b2d5fa5e69b0445fb5a718a9575a}{queue}}, \&new\_data);}
\DoxyCodeLine{178         \}}
\DoxyCodeLine{179     \}}
\DoxyCodeLine{180 }
\DoxyCodeLine{195     \textcolor{keywordtype}{void} \mbox{\hyperlink{class_share_a38fb597f730afaf9fac97240b0286f55}{operator >> }}(DataType put\_here)}
\DoxyCodeLine{196     \{}
\DoxyCodeLine{197         \textcolor{keywordflow}{if} (CHECK\_IF\_IN\_ISR ())}
\DoxyCodeLine{198         \{}
\DoxyCodeLine{199             \textcolor{comment}{// Copy the data from the queue into the receiving variable}}
\DoxyCodeLine{200             xQueuePeekFromISR (\mbox{\hyperlink{class_share_a1b82b2d5fa5e69b0445fb5a718a9575a}{queue}}, \&put\_here);}
\DoxyCodeLine{201         \}}
\DoxyCodeLine{202         \textcolor{keywordflow}{else}}
\DoxyCodeLine{203         \{}
\DoxyCodeLine{204             xQueuePeek (\mbox{\hyperlink{class_share_a1b82b2d5fa5e69b0445fb5a718a9575a}{queue}}, \&put\_here, portMAX\_DELAY);}
\DoxyCodeLine{205         \}}
\DoxyCodeLine{206     \}}
\DoxyCodeLine{207 }
\DoxyCodeLine{217     \textcolor{keywordtype}{void} \mbox{\hyperlink{class_share_a979bfb3c7bf8aa5f0601a649553d516c}{get}} (DataType\& recv\_data)}
\DoxyCodeLine{218     \{}
\DoxyCodeLine{219         \textcolor{comment}{// Copy the data from the queue into the receiving variable}}
\DoxyCodeLine{220         xQueuePeek (\mbox{\hyperlink{class_share_a1b82b2d5fa5e69b0445fb5a718a9575a}{queue}}, \&recv\_data, portMAX\_DELAY);}
\DoxyCodeLine{221     \}}
\DoxyCodeLine{222 }
\DoxyCodeLine{230     DataType \mbox{\hyperlink{class_share_ac544379dc98c1d1424efca1083baef7d}{get}} (\textcolor{keywordtype}{void})}
\DoxyCodeLine{231     \{}
\DoxyCodeLine{232         DataType return\_this;}
\DoxyCodeLine{233     }
\DoxyCodeLine{234         \textcolor{comment}{// Copy the data from the queue into the receiving variable}}
\DoxyCodeLine{235         xQueuePeek (\mbox{\hyperlink{class_share_a1b82b2d5fa5e69b0445fb5a718a9575a}{queue}}, \&return\_this, portMAX\_DELAY);}
\DoxyCodeLine{236 }
\DoxyCodeLine{237         \textcolor{keywordflow}{return} return\_this;}
\DoxyCodeLine{238     \}}
\DoxyCodeLine{239 }
\DoxyCodeLine{247     \textcolor{keywordtype}{void} \mbox{\hyperlink{class_share_a6f69eaea2dd026247dd6772a1aea23c4}{ISR\_get}} (DataType\& recv\_data)}
\DoxyCodeLine{248     \{}
\DoxyCodeLine{249         xQueuePeekFromISR (\mbox{\hyperlink{class_share_a1b82b2d5fa5e69b0445fb5a718a9575a}{queue}}, \&recv\_data);}
\DoxyCodeLine{250     \}}
\DoxyCodeLine{251 }
\DoxyCodeLine{260     DataType \mbox{\hyperlink{class_share_a8c77e37949f1e231c2c0e5b387eb3ee0}{ISR\_get}} (\textcolor{keywordtype}{void})}
\DoxyCodeLine{261     \{}
\DoxyCodeLine{262         DataType return\_this;}
\DoxyCodeLine{263         xQueuePeekFromISR (\mbox{\hyperlink{class_share_a1b82b2d5fa5e69b0445fb5a718a9575a}{queue}}, \&return\_this);}
\DoxyCodeLine{264         \textcolor{keywordflow}{return} return\_this;}
\DoxyCodeLine{265     \}}
\DoxyCodeLine{266 }
\DoxyCodeLine{267     \textcolor{comment}{// Print the share's status within a list of all shares' statuses}}
\DoxyCodeLine{268     \textcolor{keywordtype}{void} \mbox{\hyperlink{class_share_afbda236ee6fe392200a766d7e4e8a080}{print\_in\_list}} (Print\& printer);}
\DoxyCodeLine{269 }
\DoxyCodeLine{270 \}; \textcolor{comment}{// class TaskShare<DataType>}}
\DoxyCodeLine{271 }
\DoxyCodeLine{272 }
\DoxyCodeLine{281 \textcolor{keyword}{template} <\textcolor{keyword}{class} DataType>}
\DoxyCodeLine{282 \textcolor{keywordtype}{void} \mbox{\hyperlink{class_share_afbda236ee6fe392200a766d7e4e8a080}{Share<DataType>::print\_in\_list}} (Print\& printer)}
\DoxyCodeLine{283 \{}
\DoxyCodeLine{284     \textcolor{comment}{// Print this task's name and pad it to 16 characters}}
\DoxyCodeLine{285     printer.printf (\textcolor{stringliteral}{"{}\%-\/16sshare\(\backslash\)t"{}}, name);}
\DoxyCodeLine{286 }
\DoxyCodeLine{287     \textcolor{comment}{// End the line}}
\DoxyCodeLine{288     printer << endl;}
\DoxyCodeLine{289 }
\DoxyCodeLine{290     \textcolor{comment}{// Call the next item}}
\DoxyCodeLine{291     \textcolor{keywordflow}{if} (p\_next != NULL)}
\DoxyCodeLine{292     \{}
\DoxyCodeLine{293         p\_next-\/>print\_in\_list (printer);}
\DoxyCodeLine{294     \}}
\DoxyCodeLine{295 \}}
\DoxyCodeLine{296 }
\DoxyCodeLine{297 \textcolor{preprocessor}{\#endif  }\textcolor{comment}{// \_TASKSHARE\_H\_}}

\end{DoxyCode}
